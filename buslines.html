<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <title></title>
        <style type="text/css">     
            #r-result{height:100%;width:100%}          
        </style>
        <script src="jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=75RBiGQ2EO7jq6elirL9dUkm"></script>
        <script type="text/javascript">
            $(function ()
            {
                showOne();
                showTwo();
                showThree();
                showSix();
                showEight();
                showTen();
                showFive();
                showEleven();
            });
    /*
            var chartData = [];
            function showMap() {
                var startSce = $("#<%=tb_Start.ClientID%>").val();
                var EndSce = $("#<%=tb_End.ClientID%>").val();
                var viaArray = $("#<%=tb_via.ClientID%>").val();

                $.ajax({
                    type: "get",
                    data: { startSce: startSce, viaArray: viaArray, EndSce: EndSce },
                    datatype: "json",
                    url: "Handler1.ashx",
                    async: false,
                    success: function (userInfo) {
                        var abc = $.parseJSON(userInfo);
                        $.each(abc, function (item, value) {
                            chartData.push(new BMap.Point(value.lan, value.yan));
                        })
                        for (var i = 0; i < chartData.length-1; i++) {
                            var startPoint = chartData[i];
                            var endPoint = chartData[i + 1];
                            showPath(startPoint, endPoint);
                        }

                        $.each(abc, function (item, value) {
                            var firstPoint = new BMap.Point(value.lan, value.yan);
                            var m1 = new BMap.Marker(firstPoint);
                            maps.addOverlay(m1);
                            var lab1 = new BMap.Label(item+1, { position: firstPoint });
                            maps.addOverlay(lab1);
                        });

                    }
                });
            }
    */

            function showTwo() {
                linePoints = [
                {name:"客运站",position:new BMap.Point(117.318957,38.366)},
                {name:"职教中心",position:new BMap.Point(117.315508,38.394618)},
                {name:"渤海理工",position:new BMap.Point(117.325551,38.39548)},
                {name:"第三中学",position:new BMap.Point(117.327815,38.376347)},
                {name:"交警队",position:new BMap.Point(117.354916,38.378797)},
                {name:"土产公司",position:new BMap.Point(117.35303,38.383931)},
                {name:"泰丰公司",position:new BMap.Point(117.372568,38.385479)},
                {name:"市医院",position:new BMap.Point(117.373655,38.376569)},
                {name:"第一公馆",position:new BMap.Point(117.356066,38.374373)},
                {name:"华贸商厦",position:new BMap.Point(117.357212,38.369091)},
                {name:"客运站",position:new BMap.Point(117.318957,38.366)}
                ];

                for (var i = 0; i < linePoints.length-1; i++) {
                        var startPoint = linePoints[i].position;
                        var endPoint = linePoints[i + 1].position;
                        showPath(startPoint, endPoint, "blue");
                }
            }

            function showThree() {
                linePoints = [
                {name:"晶牛大厦",position:new BMap.Point(117.365287,38.36984)},
                {name:"贸易城西门",position:new BMap.Point(117.374109,38.370806)},
                {name:"市医院",position:new BMap.Point(117.373642,38.376569)},
                {name:"第二幼儿园",position:new BMap.Point(117.367138,38.376479)},
                {name:"药材公司",position:new BMap.Point(117.366918,38.379652)},
                {name:"公安局",position:new BMap.Point(117.341285,38.377651)},
                {name:"滨海假日酒店",position:new BMap.Point(117.34027,38.386444)},
                {name:"博杰华城",position:new BMap.Point(117.331951,38.385688)},
                {name:"地税局",position:new BMap.Point(117.3313,38.37672)},
                {name:"监察局",position:new BMap.Point(117.322851,38.375954)},
                {name:"冠兴商城",position:new BMap.Point(117.324064,38.365715)},
                {name:"五一机械厂",position:new BMap.Point(117.302622,38.362868)},
                {name:"南王曼",position:new BMap.Point(117.299868,38.369172)}
                ];

                for (var i = 0; i < linePoints.length-1; i++) {
                        var startPoint = linePoints[i].position;
                        var endPoint = linePoints[i + 1].position;
                        showPath(startPoint, endPoint, "brown");
                }
            }

            function showSix() {
                linePoints = [
                {name:"客运站",position:new BMap.Point(117.318957,38.366)},
                {name:"监察局",position:new BMap.Point(117.322851,38.375954)},
                {name:"市政府",position:new BMap.Point(117.335819,38.377149)},
                {name:"劳动大厦",position:new BMap.Point(117.337301,38.372333)},
                {name:"西域宾馆",position:new BMap.Point(117.346724,38.373125)},
                {name:"公路管理站",position:new BMap.Point(117.345718,38.377948)},
                {name:"黄骅中学",position:new BMap.Point(117.373305,38.380248)},
                {name:"镇政府",position:new BMap.Point(117.373619,38.376606)},
                {name:"安定医院",position:new BMap.Point(117.382234,38.377165)},
                {name:"民政局",position:new BMap.Point(117.381057,38.386027)},
                {name:"朱胡庄路口",position:new BMap.Point(117.423367,38.388882)},
                {name:"御景豪庭",position:new BMap.Point(117.429575,38.392325)},
                {name:"农业大学",position:new BMap.Point(117.44101,38.390238)}
                ];

                for (var i = 0; i < linePoints.length-1; i++) {
                        var startPoint = linePoints[i].position;
                        var endPoint = linePoints[i + 1].position;
                        showPath(startPoint, endPoint, "yellow");
                }
            }

            
            function showEight() {
                linePoints = [
                {name:"北汽5号门",position:new BMap.Point(117.32074,38.350286)},
                {name:"北汽4号门",position:new BMap.Point(117.324123,38.349709)},
                {name:"阳光新城",position:new BMap.Point(117.327051,38.352525)},
                {name:"金都小区",position:new BMap.Point(117.327231,38.381594)},
                {name:"盛华超市",position:new BMap.Point(117.340678,38.382842)},
                {name:"盐场老区东门",position:new BMap.Point(117.342372,38.368675)},
                {name:"水务局",position:new BMap.Point(117.356439,38.372434)},
                {name:"清利通讯",position:new BMap.Point(117.356089,38.37435)},
                {name:"百货大楼北",position:new BMap.Point(117.361047,38.375275)},
                {name:"清真寺",position:new BMap.Point(117.360854,38.379212)},
                {name:"黄骅中学",position:new BMap.Point(117.373305,38.380248)},
                {name:"贸易城西门",position:new BMap.Point(117.374122,38.370926)},
                {name:"木材市场",position:new BMap.Point(117.378434,38.370744)}
                ];

                for (var i = 0; i < linePoints.length-1; i++) {
                        var startPoint = linePoints[i].position;
                        var endPoint = linePoints[i + 1].position;
                        showPath(startPoint, endPoint, "red");
                }
            }

            function showTen() {
                linePoints = [
                {name:"客运站",position:new BMap.Point(117.318957,38.366)},
                {name:"文体中心",position:new BMap.Point(117.318055,38.3728)},
                {name:"教育家园西门",position:new BMap.Point(117.322667,38.377665)},
                {name:"海滨学院",position:new BMap.Point(117.323063,38.387077)},
                {name:"学院路小学",position:new BMap.Point(117.330572,38.389835)},
                {name:"中医院东路口",position:new BMap.Point(117.329854,38.395857)},
                {name:"安泰家园北口",position:new BMap.Point(117.339142,38.396088)},
                {name:"海鲜城西门",position:new BMap.Point(117.340539,38.383752)},
                {name:"土产公司",position:new BMap.Point(117.352792,38.383943)},
                {name:"耀华商厦",position:new BMap.Point(117.355424,38.378809)},
                {name:"清真寺",position:new BMap.Point(117.360868,38.378647)},
                {name:"华兴街南口",position:new BMap.Point(117.361326,38.369628)},
                {name:"老汽车站",position:new BMap.Point(117.347029,38.367598)},
                {name:"博爱医院",position:new BMap.Point(117.342695,38.357075)},
                {name:"大华家园",position:new BMap.Point(117.3374,38.356216)},
                {name:"美家隆北口",position:new BMap.Point(117.333937,38.353299)},
                {name:"北汽家园",position:new BMap.Point(117.321077,38.35336)},
                {name:"客运站",position:new BMap.Point(117.318957,38.366)}
                ];

                for (var i = 0; i < linePoints.length-1; i++) {
                        var startPoint = linePoints[i].position;
                        var endPoint = linePoints[i + 1].position;
                        showPath(startPoint, endPoint, "black");
                }
            }

            function showOne() {
                linePoints = [{name:"孙村",position:new BMap.Point(117.352096,38.345288)},{name:"孙村4站",position:new BMap.Point(117.351826,38.349398)},{name:"华建公司",position:new BMap.Point(117.345934,38.3507)},{name:"浅海大厦",position:new BMap.Point(117.341514,38.351662)},{name:"鼎信装饰城",position:new BMap.Point(117.342421, 38.353791)},{name:"博爱医院",position:new BMap.Point(117.34331,38.356982)},{name:"模具城",position:new BMap.Point(117.344685, 38.360271)},{name:"汽车站",position:new BMap.Point(117.346796,38.366234)},{name:"民生银行",position:new BMap.Point(117.347946,38.369883)},{name:"水务局",position:new BMap.Point(117.355644,38.372157)},{name:"不夜灯饰城",position:new BMap.Point(117.356165,38.373699)},{name:"信誉楼",position:new BMap.Point(117.355581,38.376025)},{name:"耀华商厦",position:new BMap.Point(117.355006,38.378507)},{name:"工商局",position:new BMap.Point(117.354602,38.38041)},{name:"康欣园",position:new BMap.Point(117.353551,38.38298)},{name:"关帝庙",position:new BMap.Point(117.360064, 38.384528)},{name:"蓉苑小区",position:new BMap.Point(117.36606,38.384857)},{name:"东十街南",position:new BMap.Point(117.366532, 38.382209)},{name:"金都雅居",position:new BMap.Point(117.367098,38.376557)},{name:"人民医院",position:new BMap.Point(117.370547,38.376559)},{name:"安定医院",position:new BMap.Point(117.380923,38.377028)},{name:"钢材市场",position:new BMap.Point(117.382854,38.371991)},{name:"通达技校",position:new BMap.Point(117.387848,38.365816)},{name:"地方铁路管理站",position:new BMap.Point(117.395026, 38.361431)},{name:"后苗新区",position:new BMap.Point(117.395322,38.35834)},{name:"后苗村",position:new BMap.Point(117.396319, 38.35447)},{name:"前苗村",position:new BMap.Point(117.396814,38.350502)}];

                for (var i = 0; i < linePoints.length-1; i++) {
                        var startPoint = linePoints[i].position;
                        var endPoint = linePoints[i + 1].position;
                        showPath(startPoint, endPoint, "green");
                }
            }



    function showFive() {
        linePoints =  [
            {name:"馨苑小区",length:293.88,lng:70411898,lat:23026685},
            {name:"关帝庙",length:362.55,lng:70409417,lat:23026500},
            {name:"回民小学",length:396.57,lng:70406702,lat:23026303},
            {name:"土产公司",length:189.51,lng:70403281,lat:23026055},
            {name:"楼后小学",length:399.43,lng:70400547,lat:23025852},
            {name:"海鲜城",length:485.35,lng:70397222,lat:23025631},
            {name:"盛华超市",length:217.91,lng:70395540,lat:23025511},
            {name:"顺意商城",length:230.96,lng:70393959,lat:23025395},
            {name:"人才市场",length:291.34,lng:70391965,lat:23025246},
            {name:"人才家园",length:326.06,lng:70391026,lat:23026101},
            {name:"博杰华城西门",length:269.16,lng:70390900,lat:23027500, description:"没有站牌"},
            {name:"学院路小学",length:282.2,lng:70390544,lat:23030199, description:""},
            {name:"广信静园",length:282.2,lng:70390526,lat:23031034, description:"没有站牌"},
            {name:"金都华府",length:191.16,lng:70390340,lat:23032548},
            {name:"万泰家园",length:533.62,lng:70392129,lat:23033669, description:"没有站牌"},
            {name:"第五中学",length:187.09,lng:70400547,lat:23034300}
        ];
        
        for (let i = 0; i < linePoints.length - 1; i++) {
            var oLng = linePoints[i].lng;
            var oLat = linePoints[i].lat;
            let startPoint = new BMap.Point(transformLngData(linePoints[i].lng), transformLatData(linePoints[i].lat));
            let endPoint = new BMap.Point(transformLngData(linePoints[i+1].lng), transformLatData(linePoints[i+1].lat));

            showPath(startPoint, endPoint, "orange");
        }         
    }

    function showEleven() {
        linePoints = [
            {name:"北王曼西",length:495.96,lng:70371251,lat:23034252},
            {name:"北王曼东",length:788.61,lng:70372954,lat:23034380},
            {name:"职教中心",length:1037.2,lng:70383309,lat:23033034, description:""},
            {name:"理工学院",length:405.83,lng:70385445,lat:23033180},
            {name:"中医院西路口",length:342.34,lng:70387655,lat:23033156},
            {name:"万锦星城北门",length:361.79,lng:70389262,lat:23031325},
            {name:"学院路小学",length:282.2,lng:70390544,lat:23030199, description:""},
            {name:"博杰华城西门",length:191.16,lng:70390805,lat:23028070},
            {name:"博杰华城",length:226.15,lng:70391422,lat:23027391, description:""},
            {name:"顺义北门",length:533.62,lng:70393080,lat:23027498, description:""},
            {name:"金宇豪庭",length:289.52,lng:70394957,lat:23027633, description:""},
            {name:"都市丽景",length:307.7,lng:70396400,lat:23028319, description:""},
            {name:"信源商厦",length:280.66,lng:70396586,lat:23029084, description:""},
            {name:"奥通景苑",length:187.09,lng:70398966,lat:23028805},
            {name:"华联宾馆北",length:237.2,lng:70399206,lat:23026722},
            {name:"华联宾馆南",length:168.38,lng:70399384,lat:23025177},
            {name:"神农居医院",length:485.35,lng:70399601,lat:23023377},
            {name:"公路管理站",length:318.97,lng:70400574,lat:23022660},
            {name:"人民公园",length:276.9,lng:70402760,lat:23022796},
            {name:"交警队",length:188.05,lng:70404655,lat:23022938},
            {name:"耀华商厦",length:256.03,lng:70405453,lat:23022445},
            {name:"信誉楼",length:232.49,lng:70405745,lat:23021213},
            {name:"清利通讯",length:74.04,lng:70406433,lat:23020458, description:"路北没有站牌"},
            {name:"海园市场",length:229.11,lng:70407978,lat:23020698, description:"路北没有站牌"},
            {name:"百货大楼",length:269.83,lng:70409784,lat:23021030},
            {name:"华东医院",length:244.42,lng:70411412,lat:23021356},
            {name:"第二幼儿园",length:273.11,lng:70413256,lat:23021633, description:"路北没有站牌"},
            {name:"市医院",length:180.67,lng:70414498,lat:23021637, description:"路南没有站牌"},
            {name:"镇政府",length:212.14,lng:70417148,lat:23021658},
            {name:"沈庄楼",length:322.83,lng:70418589,lat:23021834},
            {name:"安定医院",length:340.45,lng:70420798,lat:23022002},
        ];
        
        for (let i = 0; i < linePoints.length - 1; i++) {
            var oLng = linePoints[i].lng;
            var oLat = linePoints[i].lat;
            let startPoint = new BMap.Point(transformLngData(linePoints[i].lng), transformLatData(linePoints[i].lat));
            let endPoint = new BMap.Point(transformLngData(linePoints[i+1].lng), transformLatData(linePoints[i+1].lat));

            showPath(startPoint, endPoint, "pink");
        }         
    }
        
    function showPath(startPoint, EndPoint, color) {
        var path = new BMap.WalkingRoute(map, { renderOptions: { map: map, autoViewport: true } });
        path.search(startPoint, EndPoint);
        path.setSearchCompleteCallback(function (rs) {
            var abc = rs;
            var pts = path.getResults().getPlan(0).getRoute(0).getPath();
            maps.addOverlay(new BMap.Polyline(pts, { strokeColor: color, strokeWeight: 2, strokeOpacity: 1 }));
        });
    }

    function transformLngData(data) {
        intData = parseInt(data) / 600000;
        result = intData + (parseInt(data) - intData * 600000) / 1000000.0 * 100 / 60;
        result += 0.0128
        console.log(result);
        return result;
    }
    function transformLatData(data) {
        intData = parseInt(data) / 600000;
        result = intData + (parseInt(data) - intData * 600000) / 1000000.0 * 100 / 60;
        result += 0.00692
        console.log(result);
        return result;
    }
</script>
    </head>
    <body>

        <div id="r-result" >
        </div>
        <div id="allmap" style=" height:0px; width:0px">
            
        </div>
    </body>
</html>

<script type="text/javascript">

    var map = new BMap.Map("allmap");
    map.centerAndZoom(new BMap.Point(117.350155,38.365216),0);

    var maps = new BMap.Map("r-result");
    maps.centerAndZoom(new BMap.Point(117.350155,38.365216),15);
    
    function showInfo(e){
        alert(e.point.lng + ", " + e.point.lat);
    }
   // maps.addEventListener("click", showInfo);

    add_control(maps);

function add_control(map) {
        var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_TOP_LEFT});// 左上角，添加比例尺
        var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件
        var top_right_navigation = new BMap.NavigationControl({anchor: BMAP_ANCHOR_TOP_RIGHT, type: BMAP_NAVIGATION_CONTROL_SMALL}); //右上角，仅包含平移和缩放按钮
   /*缩放控件type有四种类型:
    BMAP_NAVIGATION_CONTROL_SMALL：仅包含平移和缩放按钮；BMAP_NAVIGATION_CONTROL_PAN:仅包含平移按钮；BMAP_NAVIGATION_CONTROL_ZOOM：仅包含缩放按钮*/
        map.addControl(top_left_control);        
        map.addControl(top_left_navigation);     
        map.addControl(top_right_navigation);  
}
</script>